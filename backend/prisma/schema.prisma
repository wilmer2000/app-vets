generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id           String        @id @default(uuid())
  email        String        @unique
  password     String
  name         String
  lastname     String
  role         Role          @default(USER)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  specialty    Specialty?
  worksAt      Veterinary?   @relation("VetStaff", fields: [worksAtId], references: [id])
  worksAtId    String?
  customerAt   Veterinary?   @relation("ClinicCustomers", fields: [customerAtId], references: [id])
  customerAtId String?
  pets         Pet[]
  appointments Appointment[]
}

model Pet {
  id           String      @id @default(uuid())
  name         String
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  breed        Breed       @relation(fields: [breedId], references: [id])
  breedId      String
  veterinary   Veterinary? @relation(fields: [veterinaryId], references: [id])
  veterinaryId String?
  owner        User?       @relation(fields: [ownerId], references: [id])
  ownerId      String?
}

model Veterinary {
  id            String        @id @default(uuid())
  name          String
  description   String?
  email         String?
  phone         String?
  street        String
  city          String?
  country       String?
  businessHours String
  isActive      Boolean
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  vets          User[]        @relation("VetStaff")
  owners        User[]        @relation("ClinicCustomers")
  pets          Pet[]
  appointments  Appointment[]
  services      Service[]
  payments      Payment[]

  configuration   Configuration @relation(fields: [configurationId], references: [id])
  configurationId String        @unique
}

model Configuration {
  id         String      @id @default(uuid())
  logo       String
  color1     String
  color2     String
  veterinary Veterinary?
}

model Service {
  id           String      @id @default(uuid())
  type         TypeService
  name         String
  veterinary   Veterinary? @relation(fields: [veterinaryId], references: [id])
  veterinaryId String?
}

model Payment {
  id           String      @id @default(uuid())
  type         TypePayment
  veterinary   Veterinary? @relation(fields: [veterinaryId], references: [id])
  veterinaryId String?
}

model Breed {
  id    String @id @default(uuid())
  breed String
  type  String
  pets  Pet[]
}

model Appointment {
  id           String      @id @default(uuid())
  owner        User        @relation(fields: [ownerId], references: [id])
  ownerId      String
  veterinary   Veterinary? @relation(fields: [veterinaryId], references: [id])
  veterinaryId String?
  service      TypeService
  startTime    DateTime
  endTime      DateTime
  status       Status
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
}

enum Status {
  PENDING
  COMPLETED
  CANCELLED
}

enum Role {
  USER
  ADMIN
  VET
  OWNER
}

enum Specialty {
  SURGERY
  DERMATOLOGY
  CARDIOLOGY
  ONCOLOGY
  NEUROLOGY
}

enum TypeService {
  CONSULTATION
  SURGERY
  GROOMING
  EMERGENCY
}

enum TypePayment {
  MERCADOPAGO
  VISA
  MASTERCARD
  PREX
  CASH
}
